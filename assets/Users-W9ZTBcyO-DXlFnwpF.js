import{l as a,_ as e,a as l,H as t,N as s,q as u,U as o,p as r,d as n,b as p,e as d,a7 as c,u as i,a8 as v}from"./index-CXpj-iG1.js";const b={class:"users-page"},f={class:"toolbar"},g=a({__name:"Users",setup(a){const g=e([]),_=e(""),m=e(1),h=e(20),y=e(0),w=async()=>{try{const a=await v({page:m.value,size:h.value,keyword:_.value});g.value=a.data.list,y.value=a.data.total}catch(a){}},C=()=>{m.value=1,w()};return l(()=>{w()}),(a,e)=>{const l=n("Search"),v=n("el-icon"),I=n("el-input"),V=n("el-table-column"),A=n("el-tag"),E=n("el-button"),T=n("el-table"),x=n("el-pagination");return s(),t("div",b,[e[2]||(e[2]=u("h1",null,"用户管理",-1)),u("div",f,[o(I,{modelValue:_.value,"onUpdate:modelValue":e[0]||(e[0]=a=>_.value=a),placeholder:"搜索用户...",style:{width:"300px"},onInput:C},{prefix:r(()=>[o(v,null,{default:r(()=>[o(l)]),_:1})]),_:1},8,["modelValue"])]),o(T,{data:g.value,style:{width:"100%"}},{default:r(()=>[o(V,{prop:"id",label:"ID",width:"80"}),o(V,{prop:"username",label:"用户名"}),o(V,{prop:"email",label:"邮箱"}),o(V,{prop:"role",label:"角色"}),o(V,{prop:"status",label:"状态"},{default:r(({row:a})=>[o(A,{type:"ACTIVE"===a.status?"success":"danger"},{default:r(()=>[p(d("ACTIVE"===a.status?"正常":"禁用"),1)]),_:2},1032,["type"])]),_:1}),o(V,{prop:"createTime",label:"注册时间"}),o(V,{label:"操作",width:"200"},{default:r(({row:a})=>[o(E,{size:"small",onClick:e=>(async a=>{const e="ACTIVE"===a.status?"DISABLED":"ACTIVE";try{await c(a.id,e),i.success("操作成功"),w()}catch(l){}})(a)},{default:r(()=>[p(d("ACTIVE"===a.status?"禁用":"启用"),1)]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),o(x,{"current-page":m.value,"onUpdate:currentPage":e[1]||(e[1]=a=>m.value=a),"page-size":h.value,total:y.value,layout:"total, prev, pager, next",onCurrentChange:w},null,8,["current-page","page-size","total"])])}}},[["__scopeId","data-v-ad0f7faf"]]);export{g as default};
