import{r as e,a as l,d as a,i as t,s as o}from"./studioIntro-O_sxp5-0-tVXNY97g.js";import{l as u,_ as d,a as n,H as i,N as r,q as s,U as c,p,b as m,d as v,u as b,a5 as f}from"./index-CXpj-iG1.js";const h={class:"studio-intro-page"},w={class:"toolbar"},V=u({__name:"StudioIntro",setup(u){const V=d([]),y=d(!1),_=d({}),g=d(!1),U=async()=>{try{const e=await a();V.value=e.data||[]}catch(e){b.error("加载介绍列表失败")}},C=e=>{_.value=e?{...e}:{sectionKey:"",title:"",titleEn:"",content:"",icon:"",sortOrder:0,enabled:!0},y.value=!0},k=async()=>{if(_.value.sectionKey)if(_.value.title){g.value=!0;try{_.value.id?await t(_.value.id,_.value):await o(_.value),b.success("保存成功"),y.value=!1,U()}catch(e){b.error("保存失败")}finally{g.value=!1}}else b.warning("请输入标题");else b.warning("请输入区块标识")};return n(()=>{U()}),(a,t)=>{const o=v("el-button"),u=v("el-table-column"),d=v("el-switch"),n=v("el-table"),O=v("el-input"),x=v("el-form-item"),E=v("el-option"),K=v("el-select"),S=v("el-input-number"),I=v("el-form"),D=v("el-dialog");return r(),i("div",h,[t[17]||(t[17]=s("h1",null,"工作室介绍管理",-1)),s("div",w,[c(o,{type:"primary",onClick:t[0]||(t[0]=e=>C())},{default:p(()=>[...t[10]||(t[10]=[m("添加介绍内容",-1)])]),_:1})]),c(n,{data:V.value,style:{width:"100%"}},{default:p(()=>[c(u,{prop:"id",label:"ID",width:"80"}),c(u,{prop:"sectionKey",label:"区块标识",width:"120"}),c(u,{prop:"title",label:"标题",width:"150"}),c(u,{prop:"titleEn",label:"英文标题",width:"180"}),c(u,{prop:"content",label:"内容","show-overflow-tooltip":""}),c(u,{prop:"icon",label:"图标",width:"120"}),c(u,{prop:"sortOrder",label:"排序",width:"80"}),c(u,{label:"状态",width:"100"},{default:p(({row:l})=>[c(d,{modelValue:l.enabled,"onUpdate:modelValue":e=>l.enabled=e,onChange:a=>(async l=>{try{await e(l.id),b.success(l.enabled?"已启用":"已禁用")}catch(a){b.error("切换状态失败"),l.enabled=!l.enabled}})(l)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),c(u,{label:"操作",width:"200"},{default:p(({row:e})=>[c(o,{size:"small",onClick:l=>C(e)},{default:p(()=>[...t[11]||(t[11]=[m("编辑",-1)])]),_:1},8,["onClick"]),c(o,{size:"small",type:"danger",onClick:a=>(async e=>{try{await f.confirm("确定删除该介绍内容吗?","提示",{type:"warning"}),await l(e),b.success("删除成功"),U()}catch(a){"cancel"!==a&&b.error("删除失败")}})(e.id)},{default:p(()=>[...t[12]||(t[12]=[m("删除",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"]),c(D,{modelValue:y.value,"onUpdate:modelValue":t[9]||(t[9]=e=>y.value=e),title:_.value.id?"编辑介绍内容":"添加介绍内容",width:"600px"},{footer:p(()=>[c(o,{onClick:t[8]||(t[8]=e=>y.value=!1)},{default:p(()=>[...t[15]||(t[15]=[m("取消",-1)])]),_:1}),c(o,{type:"primary",onClick:k,loading:g.value},{default:p(()=>[...t[16]||(t[16]=[m("保存",-1)])]),_:1},8,["loading"])]),default:p(()=>[c(I,{model:_.value,"label-width":"100px"},{default:p(()=>[c(x,{label:"区块标识"},{default:p(()=>[c(O,{modelValue:_.value.sectionKey,"onUpdate:modelValue":t[1]||(t[1]=e=>_.value.sectionKey=e),placeholder:"如：overview, mission, values, contact"},null,8,["modelValue"]),t[13]||(t[13]=s("div",{class:"form-tip"},"用于标识不同的介绍区块，建议使用英文",-1))]),_:1}),c(x,{label:"标题"},{default:p(()=>[c(O,{modelValue:_.value.title,"onUpdate:modelValue":t[2]||(t[2]=e=>_.value.title=e),placeholder:"请输入中文标题"},null,8,["modelValue"])]),_:1}),c(x,{label:"英文标题"},{default:p(()=>[c(O,{modelValue:_.value.titleEn,"onUpdate:modelValue":t[3]||(t[3]=e=>_.value.titleEn=e),placeholder:"请输入英文标题"},null,8,["modelValue"])]),_:1}),c(x,{label:"内容"},{default:p(()=>[c(O,{modelValue:_.value.content,"onUpdate:modelValue":t[4]||(t[4]=e=>_.value.content=e),type:"textarea",rows:6,placeholder:"请输入介绍内容，支持换行"},null,8,["modelValue"])]),_:1}),c(x,{label:"图标"},{default:p(()=>[c(K,{modelValue:_.value.icon,"onUpdate:modelValue":t[5]||(t[5]=e=>_.value.icon=e),placeholder:"请选择图标",style:{width:"100%"},filterable:"","allow-create":""},{default:p(()=>[c(E,{label:"OfficeBuilding - 办公楼",value:"OfficeBuilding"}),c(E,{label:"Aim - 目标",value:"Aim"}),c(E,{label:"Medal - 奖章",value:"Medal"}),c(E,{label:"Phone - 电话",value:"Phone"}),c(E,{label:"User - 用户",value:"User"}),c(E,{label:"Star - 星星",value:"Star"}),c(E,{label:"Trophy - 奖杯",value:"Trophy"}),c(E,{label:"Document - 文档",value:"Document"}),c(E,{label:"Setting - 设置",value:"Setting"}),c(E,{label:"Location - 位置",value:"Location"})]),_:1},8,["modelValue"]),t[14]||(t[14]=s("div",{class:"form-tip"},"可选择预设图标或输入Element Plus图标名称",-1))]),_:1}),c(x,{label:"排序"},{default:p(()=>[c(S,{modelValue:_.value.sortOrder,"onUpdate:modelValue":t[6]||(t[6]=e=>_.value.sortOrder=e),min:0,placeholder:"数字越小越靠前",style:{width:"100%"}},null,8,["modelValue"])]),_:1}),c(x,{label:"启用状态"},{default:p(()=>[c(d,{modelValue:_.value.enabled,"onUpdate:modelValue":t[7]||(t[7]=e=>_.value.enabled=e)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}},[["__scopeId","data-v-31960395"]]);export{V as default};
