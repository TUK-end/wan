import{r as e,s as a}from"./rating-BVRVyCcO-BR8_6q4W.js";import{l as t,_ as l,a as s,H as r,N as o,q as i,U as n,d as c,p as u,b as d,e as p,A as m,ad as g,ae as v,a5 as f,u as w}from"./index-CXpj-iG1.js";const h={class:"ratings-page"},b={class:"toolbar"},_={class:"user-cell"},y={class:"score-cell"},x={class:"score-badge"},C={class:"comment-text"},z={class:"time-cell"},V=t({__name:"Ratings",setup(t){const V=l([]),U=l(1),N=l(20),T=l(0),B=async()=>{try{const e=await a({page:U.value,size:N.value});V.value=e.data.list||[],T.value=e.data.total||0}catch(e){w.error("加载失败")}},j=e=>e?new Date(e).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"";return s(()=>{B()}),(a,t)=>{const l=c("el-statistic"),s=c("el-table-column"),k=c("el-avatar"),A=c("el-tag"),D=c("el-rate"),I=c("el-icon"),R=c("el-button"),q=c("el-table"),H=c("el-pagination");return o(),r("div",h,[t[2]||(t[2]=i("h1",null,"评论管理",-1)),i("div",b,[n(l,{title:"总评论数",value:T.value},null,8,["value"])]),n(q,{data:V.value,style:{width:"100%"},stripe:""},{default:u(()=>[n(s,{prop:"id",label:"ID",width:"80"}),n(s,{prop:"username",label:"用户",width:"120"},{default:u(({row:e})=>[i("div",_,[n(k,{size:32},{default:u(()=>{var a;return[d(p(null==(a=e.username)?void 0:a.charAt(0).toUpperCase()),1)]}),_:2},1024),i("span",null,p(e.username),1)])]),_:1}),n(s,{prop:"celebrityName",label:"评价名人",width:"150"},{default:u(({row:e})=>[n(A,{type:"success"},{default:u(()=>[d(p(e.celebrityName),1)]),_:2},1024)]),_:1}),n(s,{prop:"score",label:"评分",width:"100"},{default:u(({row:e})=>[i("div",y,[i("span",x,p(e.score),1),n(D,{modelValue:e.score,"onUpdate:modelValue":a=>e.score=a,disabled:"","show-score":"","text-color":"#ff9900",max:10},null,8,["modelValue","onUpdate:modelValue"])])]),_:1}),n(s,{prop:"comment",label:"评论内容","min-width":"300"},{default:u(({row:e})=>[i("div",C,p(e.comment||"无评论"),1)]),_:1}),n(s,{prop:"createTime",label:"创建时间",width:"180"},{default:u(({row:e})=>[i("div",z,[n(I,null,{default:u(()=>[n(m(g))]),_:1}),i("span",null,p(j(e.createTime)),1)])]),_:1}),n(s,{label:"操作",width:"120",fixed:"right"},{default:u(({row:a})=>[n(R,{size:"small",type:"danger",onClick:t=>(async a=>{try{await f.confirm("确定删除该评论吗？删除后无法恢复。","删除确认",{type:"warning",confirmButtonText:"确定删除",cancelButtonText:"取消"}),await e(a),w.success("删除成功"),B()}catch(t){"cancel"!==t&&w.error("删除失败")}})(a.id),icon:m(v)},{default:u(()=>[...t[1]||(t[1]=[d(" 删除 ",-1)])]),_:1},8,["onClick","icon"])]),_:1})]),_:1},8,["data"]),n(H,{"current-page":U.value,"onUpdate:currentPage":t[0]||(t[0]=e=>U.value=e),"page-size":N.value,total:T.value,layout:"total, prev, pager, next",onCurrentChange:B},null,8,["current-page","page-size","total"])])}}},[["__scopeId","data-v-8dcf9a3a"]]);export{V as default};
