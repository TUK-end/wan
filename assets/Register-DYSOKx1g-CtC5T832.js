import{l as a,$ as e,_ as s,H as l,N as r,q as u,k as n,L as o,m as i,O as t,e as d,b as p,U as m,p as v,d as c,R as w,u as g,f}from"./index-CXpj-iG1.js";const b={class:"register-page"},h={class:"inputGroup"},y={class:"inputGroup"},x={class:"inputGroup"},G={class:"inputGroup"},P={class:"inputGroup"},U={class:"checkbox-label"},_={class:"inputGroup"},k=["disabled"],V={class:"login-link"},R=a({__name:"Register",setup(a){const R=f(),$=e(),j=s(!1),q=s({username:"",email:"",password:"",confirmPassword:"",agree:!1}),z=async()=>{var a,e;if(q.value.username?q.value.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(q.value.email)?q.value.password?q.value.password.length<8?(g.warning("密码至少8位"),0):/[a-zA-Z]/.test(q.value.password)&&/\d/.test(q.value.password)?q.value.password!==q.value.confirmPassword?(g.warning("两次密码不一致"),0):q.value.agree||(g.warning("请同意用户协议"),0):(g.warning("密码必须包含字母和数字"),0):(g.warning("请输入密码"),0):(g.warning("邮箱格式不正确"),0):(g.warning("请输入邮箱"),0):(g.warning("请输入用户名"),0)){j.value=!0;try{await $.register({username:q.value.username,email:q.value.email,password:q.value.password}),g.success("注册成功！您的账号需要管理员审核通过后才能登录，请耐心等待"),setTimeout(()=>{R.push("/login")},2e3)}catch(s){g.error((null==(e=null==(a=s.response)?void 0:a.data)?void 0:e.message)||"注册失败")}finally{j.value=!1}}};return(a,e)=>{const s=c("router-link");return r(),l("div",b,[u("form",{onSubmit:w(z,["prevent"])},[e[12]||(e[12]=u("h2",{class:"form-title"},"注册账号",-1)),u("div",h,[e[5]||(e[5]=u("label",{for:"username"},"用户名",-1)),n(u("input",{type:"text",id:"username","onUpdate:modelValue":e[0]||(e[0]=a=>q.value.username=a),maxlength:"50",placeholder:"请输入用户名"},null,512),[[o,q.value.username]])]),u("div",y,[e[6]||(e[6]=u("label",{for:"email"},"邮箱",-1)),n(u("input",{type:"email",id:"email","onUpdate:modelValue":e[1]||(e[1]=a=>q.value.email=a),placeholder:"请输入邮箱"},null,512),[[o,q.value.email]])]),u("div",x,[e[7]||(e[7]=u("label",{for:"password"},"密码",-1)),n(u("input",{type:"password",id:"password","onUpdate:modelValue":e[2]||(e[2]=a=>q.value.password=a),placeholder:"至少8位，包含字母和数字"},null,512),[[o,q.value.password]])]),u("div",G,[e[8]||(e[8]=u("label",{for:"confirmPassword"},"确认密码",-1)),n(u("input",{type:"password",id:"confirmPassword","onUpdate:modelValue":e[3]||(e[3]=a=>q.value.confirmPassword=a),onKeyup:i(z,["enter"]),placeholder:"请再次输入密码"},null,544),[[o,q.value.confirmPassword]])]),u("div",P,[u("label",U,[n(u("input",{type:"checkbox","onUpdate:modelValue":e[4]||(e[4]=a=>q.value.agree=a)},null,512),[[t,q.value.agree]]),e[9]||(e[9]=u("span",null,"我已阅读并同意用户协议",-1))])]),u("div",_,[u("button",{type:"submit",disabled:j.value},d(j.value?"注册中...":"注册"),9,k)]),u("div",V,[e[11]||(e[11]=p(" 已有账号? ",-1)),m(s,{to:"/login"},{default:v(()=>[...e[10]||(e[10]=[p("立即登录",-1)])]),_:1})])],32)])}}},[["__scopeId","data-v-5aeeb404"]]);export{R as default};
