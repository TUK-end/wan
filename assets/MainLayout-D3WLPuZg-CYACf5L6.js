import{l as e,$ as t,P as a,x as o,n as l,_ as s,X as d,t as r,a as i,o as n,H as u,N as f,U as c,J as p,p as h,q as v,d as g,b as m,c as x,A as w,j as k,e as _,Z as b,f as y}from"./index-CXpj-iG1.js";import{c as M}from"./index-DdPmJgzX-CCYd_JwC.js";import{T as C}from"./MotionPathPlugin-BsdGd8dg-FpJsXBQ8.js";const P={class:"main-layout"},B={class:"header-content"},G=["src"],R={class:"user-menu"},S=["title"],A={class:"user-name"},N={class:"boat-wrapper"},O={class:"boat-goo-box"},$={class:"boat-path-box"},j={class:"boat-svg-path",xmlns:"http://www.w3.org/2000/svg"},z={width:"0",height:"0",style:{position:"absolute"},role:"none",xmlns:"http://www.w3.org/2000/svg"},I=e({__name:"MainLayout",setup(e){M.registerPlugin(C);const I=l(),L=y(),T=t(),D=a(),J=o(()=>I.path),U=o(()=>"/home"===I.path||"/"===I.path),X=o(()=>"dark"===D.theme?"/logo-dark.png":"/logo.png"),Z=()=>{T.logout(),L.push("/login")},q=()=>{D.toggleTheme()},E=s(null),H=s(null),W=s(null),F=s(null),K=s(null);let Q=null;const V=()=>{const e=H.value,t=W.value,a=F.value,o=K.value;if(!(e&&t&&a&&o))return;const l=[];for(let r=0;r<=8;r++)l.push({x:0,y:0});const s=()=>{const e=window.innerWidth+40;for(let t=0;t<=8;t++)l[t].x=Math.round(t/8*e),l[t].y=0;M.set(o,{attr:{viewBox:"0 0 "+e+" 200"}}),d()},d=()=>{let s="M";for(let e=0;e<l.length;e++)s+=l[e].x+","+l[e].y+" ";M.set(a,{attr:{d:s}}),s+=l[l.length-1].x+", 200 "+l[0].x+", 200 Z",M.set(o,{attr:{d:s}}),M.set(t,{clipPath:'path("'+s+'")'}),M.set(e,{motionPath:{path:a,align:a,alignOrigin:[.5,.75],autoRotate:!0,start:.5,end:.5}})};s(),Q=M.timeline({defaults:{duration:4}}).to(l,{y:e=>65,ease:"sine.inOut",stagger:{amount:5,repeat:-1,yoyo:!0},onUpdate:d}),window.addEventListener("resize",()=>{s()})};return d(U,e=>{e?r(()=>{V()}):Q&&(Q.kill(),Q=null)},{immediate:!0}),i(()=>{U.value&&r(()=>{V()})}),n(()=>{Q&&Q.kill()}),(e,t)=>{const a=g("el-menu-item"),o=g("el-menu"),l=g("el-dropdown-item"),s=g("el-dropdown-menu"),d=g("el-dropdown"),r=g("el-button"),i=g("el-header"),n=g("router-view"),y=g("el-main"),M=g("el-footer");return f(),u("div",P,[c(i,{class:"header"},{default:h(()=>[v("div",B,[v("div",{class:"logo",onClick:t[0]||(t[0]=t=>e.$router.push("/home"))},[v("img",{src:X.value,alt:"网安名人堂",class:"logo-img"},null,8,G),t[4]||(t[4]=v("span",{class:"logo-text"},"网安名人堂",-1))]),c(o,{mode:"horizontal","default-active":J.value,router:""},{default:h(()=>[c(a,{index:"/home"},{default:h(()=>[...t[5]||(t[5]=[m("首页",-1)])]),_:1}),c(a,{index:"/about"},{default:h(()=>[...t[6]||(t[6]=[m("工作室介绍",-1)])]),_:1}),c(a,{index:"/hall"},{default:h(()=>[...t[7]||(t[7]=[m("名人堂",-1)])]),_:1}),c(a,{index:"/rating"},{default:h(()=>[...t[8]||(t[8]=[m("评分区",-1)])]),_:1})]),_:1},8,["default-active"]),v("div",R,[v("div",{class:"theme-toggle",onClick:q,title:"dark"===w(D).theme?"切换到白天模式":"切换到黑夜模式"},[v("div",{class:k(["power-button",{active:"dark"===w(D).theme}])},[...t[9]||(t[9]=[v("div",{class:"power-icon"},[v("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[v("path",{d:"M12 2v10M18.36 6.64a9 9 0 1 1-12.73 0"})])],-1),v("div",{class:"power-ring"},null,-1)])],2)],8,S),w(T).isLoggedIn?(f(),x(d,{key:0},{dropdown:h(()=>[c(s,null,{default:h(()=>[c(l,{onClick:t[1]||(t[1]=t=>e.$router.push("/profile"))},{default:h(()=>[...t[10]||(t[10]=[m("个人中心",-1)])]),_:1}),w(T).isAdmin?(f(),x(l,{key:0,onClick:t[2]||(t[2]=t=>e.$router.push("/admin"))},{default:h(()=>[...t[11]||(t[11]=[m("后台管理",-1)])]),_:1})):p("",!0),c(l,{divided:"",onClick:Z},{default:h(()=>[...t[12]||(t[12]=[m("退出登录",-1)])]),_:1})]),_:1})]),default:h(()=>{var e;return[v("span",A,_(null==(e=w(T).userInfo)?void 0:e.username),1)]}),_:1})):(f(),x(r,{key:1,onClick:t[3]||(t[3]=t=>e.$router.push("/login"))},{default:h(()=>[...t[13]||(t[13]=[m("登录",-1)])]),_:1}))])])]),_:1}),c(y,{class:"main-content"},{default:h(()=>[c(n)]),_:1}),U.value?(f(),u("div",{key:0,class:"boat-section",ref_key:"boatSectionRef",ref:E},[v("div",N,[v("div",O,[v("div",{class:"boat",ref_key:"boatRef",ref:H},null,512),v("div",{class:"water-tank",ref_key:"waterTankRef",ref:W},null,512)]),v("div",$,[(f(),u("svg",j,[v("path",{class:"boat-motion-path",ref_key:"boatMotionPathRef",ref:F,fill:"none",stroke:"none",d:""},null,512)]))])]),(f(),u("svg",z,[v("defs",null,[t[14]||(t[14]=b('<filter id="boatGoo" x="-10%" y="-10%" height="120%" width="120%" data-v-ddd702e6><feGaussianBlur in="SourceGraphic" stdDeviation="8" result="blur" data-v-ddd702e6></feGaussianBlur><feColorMatrix in="blur" mode="matrix" values="1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 19 -9" result="goo" data-v-ddd702e6></feColorMatrix><feComposite in="SourceGraphic" in2="goo" operator="atop" data-v-ddd702e6></feComposite></filter><filter id="boatOutline" x="-10%" y="-10%" height="120%" width="120%" data-v-ddd702e6><feColorMatrix in="SourceAlpha" values="1 1 1 1 1  1 1 1 1 1  1 1 1 1 1  0 0 0 1 0" result="mx" data-v-ddd702e6></feColorMatrix><feMorphology in="mx" operator="dilate" radius="3" result="mor1" data-v-ddd702e6></feMorphology><feComposite in="mor1" in2="SourceGraphic" operator="out" result="com1" data-v-ddd702e6></feComposite><feOffset in="com1" dx="0" dy="0" result="offset1" data-v-ddd702e6></feOffset><feMerge data-v-ddd702e6><feMergeNode in="offset1" data-v-ddd702e6></feMergeNode><feMergeNode in="SourceAlpha" data-v-ddd702e6></feMergeNode></feMerge></filter>',2)),v("path",{id:"boatBoxPath",ref_key:"boatBoxPathRef",ref:K,d:""},null,512)])]))],512)):p("",!0),c(M,{class:"footer"},{default:h(()=>[...t[15]||(t[15]=[v("div",{class:"footer-content"},[v("p",null,"© 2024 网安名人堂工作室. All rights reserved."),v("p",null,"联系邮箱: contact@wangan.com")],-1)])]),_:1})])}}},[["__scopeId","data-v-ddd702e6"]]);export{I as default};
