import{_ as a,u as e,r as s,e as l,f as r,j as u,z as n,A as o,B as i,W as t,t as d,l as p,g as v,i as m,k as c,V as w,v as g,H as f}from"./index-MMiF18kJ.js";const b={class:"register-page"},h={class:"inputGroup"},y={class:"inputGroup"},x={class:"inputGroup"},G={class:"inputGroup"},P={class:"inputGroup"},V={class:"checkbox-label"},_={class:"inputGroup"},k=["disabled"],U={class:"login-link"},j=a({__name:"Register",setup(a){const j=g(),z=e(),A=s(!1),B=s({username:"",email:"",password:"",confirmPassword:"",agree:!1}),H=async()=>{var a,e;if(B.value.username?B.value.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(B.value.email)?B.value.password?B.value.password.length<8?(f.warning("密码至少8位"),0):/[a-zA-Z]/.test(B.value.password)&&/\d/.test(B.value.password)?B.value.password!==B.value.confirmPassword?(f.warning("两次密码不一致"),0):B.value.agree||(f.warning("请同意用户协议"),0):(f.warning("密码必须包含字母和数字"),0):(f.warning("请输入密码"),0):(f.warning("邮箱格式不正确"),0):(f.warning("请输入邮箱"),0):(f.warning("请输入用户名"),0)){A.value=!0;try{await z.register({username:B.value.username,email:B.value.email,password:B.value.password}),f.success("注册成功！您的账号需要管理员审核通过后才能登录，请耐心等待"),setTimeout(()=>{j.push("/login")},2e3)}catch(s){f.error((null==(e=null==(a=s.response)?void 0:a.data)?void 0:e.message)||"注册失败")}finally{A.value=!1}}};return(a,e)=>{const s=c("router-link");return r(),l("div",b,[u("form",{onSubmit:w(H,["prevent"])},[e[12]||(e[12]=u("h2",{class:"form-title"},"注册账号",-1)),u("div",h,[e[5]||(e[5]=u("label",{for:"username"},"用户名",-1)),n(u("input",{type:"text",id:"username","onUpdate:modelValue":e[0]||(e[0]=a=>B.value.username=a),maxlength:"50",placeholder:"请输入用户名"},null,512),[[o,B.value.username]])]),u("div",y,[e[6]||(e[6]=u("label",{for:"email"},"邮箱",-1)),n(u("input",{type:"email",id:"email","onUpdate:modelValue":e[1]||(e[1]=a=>B.value.email=a),placeholder:"请输入邮箱"},null,512),[[o,B.value.email]])]),u("div",x,[e[7]||(e[7]=u("label",{for:"password"},"密码",-1)),n(u("input",{type:"password",id:"password","onUpdate:modelValue":e[2]||(e[2]=a=>B.value.password=a),placeholder:"至少8位，包含字母和数字"},null,512),[[o,B.value.password]])]),u("div",G,[e[8]||(e[8]=u("label",{for:"confirmPassword"},"确认密码",-1)),n(u("input",{type:"password",id:"confirmPassword","onUpdate:modelValue":e[3]||(e[3]=a=>B.value.confirmPassword=a),onKeyup:i(H,["enter"]),placeholder:"请再次输入密码"},null,544),[[o,B.value.confirmPassword]])]),u("div",P,[u("label",V,[n(u("input",{type:"checkbox","onUpdate:modelValue":e[4]||(e[4]=a=>B.value.agree=a)},null,512),[[t,B.value.agree]]),e[9]||(e[9]=u("span",null,"我已阅读并同意用户协议",-1))])]),u("div",_,[u("button",{type:"submit",disabled:A.value},d(A.value?"注册中...":"注册"),9,k)]),u("div",U,[e[11]||(e[11]=p(" 已有账号? ",-1)),v(s,{to:"/login"},{default:m(()=>[...e[10]||(e[10]=[p("立即登录",-1)])]),_:1})])],32)])}}},[["__scopeId","data-v-5aeeb404"]]);export{j as default};
