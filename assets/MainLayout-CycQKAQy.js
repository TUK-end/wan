import{_ as e,u as t,a,c as o,b as l,r as s,w as d,o as r,n as i,d as n,e as u,f,g as c,h,i as p,j as v,k as g,l as m,m as w,p as x,q as k,t as _,s as b,v as y}from"./index-CYfi38du.js";import{g as M}from"./index-DdPmJgzX.js";import{M as C}from"./MotionPathPlugin-BsdGd8dg.js";const P={class:"main-layout"},B={class:"header-content"},G=["src"],R={class:"user-menu"},S=["title"],O={class:"user-name"},j={class:"boat-wrapper"},A={class:"boat-goo-box"},N={class:"boat-path-box"},$={class:"boat-svg-path",xmlns:"http://www.w3.org/2000/svg"},I={width:"0",height:"0",style:{position:"absolute"},role:"none",xmlns:"http://www.w3.org/2000/svg"},L=e({__name:"MainLayout",setup(e){M.registerPlugin(C);const L=l(),z=y(),T=t(),q=a(),D=o(()=>L.path),E=o(()=>"/home"===L.path||"/"===L.path),U=o(()=>"dark"===q.theme?"/logo-dark.png":"/logo.png"),W=()=>{T.logout(),z.push("/login")},Z=()=>{q.toggleTheme()},F=s(null),H=s(null),J=s(null),K=s(null),Q=s(null);let V=null;const X=()=>{const e=H.value,t=J.value,a=K.value,o=Q.value;if(!(e&&t&&a&&o))return;const l=[];for(let r=0;r<=8;r++)l.push({x:0,y:0});const s=()=>{const e=window.innerWidth+40;for(let t=0;t<=8;t++)l[t].x=Math.round(t/8*e),l[t].y=0;M.set(o,{attr:{viewBox:"0 0 "+e+" 200"}}),d()},d=()=>{let s="M";for(let e=0;e<l.length;e++)s+=l[e].x+","+l[e].y+" ";M.set(a,{attr:{d:s}}),s+=l[l.length-1].x+", 200 "+l[0].x+", 200 Z",M.set(o,{attr:{d:s}}),M.set(t,{clipPath:'path("'+s+'")'}),M.set(e,{motionPath:{path:a,align:a,alignOrigin:[.5,.75],autoRotate:!0,start:.5,end:.5}})};s(),V=M.timeline({defaults:{duration:4}}).to(l,{y:e=>65,ease:"sine.inOut",stagger:{amount:5,repeat:-1,yoyo:!0},onUpdate:d});window.addEventListener("resize",()=>{s()})};return d(E,e=>{e?i(()=>{X()}):V&&(V.kill(),V=null)},{immediate:!0}),r(()=>{E.value&&i(()=>{X()})}),n(()=>{V&&V.kill()}),(e,t)=>{const a=g("el-menu-item"),o=g("el-menu"),l=g("el-dropdown-item"),s=g("el-dropdown-menu"),d=g("el-dropdown"),r=g("el-button"),i=g("el-header"),n=g("router-view"),y=g("el-main"),M=g("el-footer");return f(),u("div",P,[c(i,{class:"header"},{default:p(()=>[v("div",B,[v("div",{class:"logo",onClick:t[0]||(t[0]=t=>e.$router.push("/home"))},[v("img",{src:U.value,alt:"网安名人堂",class:"logo-img"},null,8,G),t[4]||(t[4]=v("span",{class:"logo-text"},"网安名人堂",-1))]),c(o,{mode:"horizontal","default-active":D.value,router:""},{default:p(()=>[c(a,{index:"/home"},{default:p(()=>[...t[5]||(t[5]=[m("首页",-1)])]),_:1}),c(a,{index:"/about"},{default:p(()=>[...t[6]||(t[6]=[m("工作室介绍",-1)])]),_:1}),c(a,{index:"/hall"},{default:p(()=>[...t[7]||(t[7]=[m("名人堂",-1)])]),_:1}),c(a,{index:"/rating"},{default:p(()=>[...t[8]||(t[8]=[m("评分区",-1)])]),_:1})]),_:1},8,["default-active"]),v("div",R,[v("div",{class:"theme-toggle",onClick:Z,title:"dark"===x(q).theme?"切换到白天模式":"切换到黑夜模式"},[v("div",{class:k(["power-button",{active:"dark"===x(q).theme}])},[...t[9]||(t[9]=[v("div",{class:"power-icon"},[v("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[v("path",{d:"M12 2v10M18.36 6.64a9 9 0 1 1-12.73 0"})])],-1),v("div",{class:"power-ring"},null,-1)])],2)],8,S),x(T).isLoggedIn?(f(),w(d,{key:0},{dropdown:p(()=>[c(s,null,{default:p(()=>[c(l,{onClick:t[1]||(t[1]=t=>e.$router.push("/profile"))},{default:p(()=>[...t[10]||(t[10]=[m("个人中心",-1)])]),_:1}),x(T).isAdmin?(f(),w(l,{key:0,onClick:t[2]||(t[2]=t=>e.$router.push("/admin"))},{default:p(()=>[...t[11]||(t[11]=[m("后台管理",-1)])]),_:1})):h("",!0),c(l,{divided:"",onClick:W},{default:p(()=>[...t[12]||(t[12]=[m("退出登录",-1)])]),_:1})]),_:1})]),default:p(()=>{var e;return[v("span",O,_(null==(e=x(T).userInfo)?void 0:e.username),1)]}),_:1})):(f(),w(r,{key:1,onClick:t[3]||(t[3]=t=>e.$router.push("/login"))},{default:p(()=>[...t[13]||(t[13]=[m("登录",-1)])]),_:1}))])])]),_:1}),c(y,{class:"main-content"},{default:p(()=>[c(n)]),_:1}),E.value?(f(),u("div",{key:0,class:"boat-section",ref_key:"boatSectionRef",ref:F},[v("div",j,[v("div",A,[v("div",{class:"boat",ref_key:"boatRef",ref:H},null,512),v("div",{class:"water-tank",ref_key:"waterTankRef",ref:J},null,512)]),v("div",N,[(f(),u("svg",$,[v("path",{class:"boat-motion-path",ref_key:"boatMotionPathRef",ref:K,fill:"none",stroke:"none",d:""},null,512)]))])]),(f(),u("svg",I,[v("defs",null,[t[14]||(t[14]=b('<filter id="boatGoo" x="-10%" y="-10%" height="120%" width="120%" data-v-ddd702e6><feGaussianBlur in="SourceGraphic" stdDeviation="8" result="blur" data-v-ddd702e6></feGaussianBlur><feColorMatrix in="blur" mode="matrix" values="1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 19 -9" result="goo" data-v-ddd702e6></feColorMatrix><feComposite in="SourceGraphic" in2="goo" operator="atop" data-v-ddd702e6></feComposite></filter><filter id="boatOutline" x="-10%" y="-10%" height="120%" width="120%" data-v-ddd702e6><feColorMatrix in="SourceAlpha" values="1 1 1 1 1  1 1 1 1 1  1 1 1 1 1  0 0 0 1 0" result="mx" data-v-ddd702e6></feColorMatrix><feMorphology in="mx" operator="dilate" radius="3" result="mor1" data-v-ddd702e6></feMorphology><feComposite in="mor1" in2="SourceGraphic" operator="out" result="com1" data-v-ddd702e6></feComposite><feOffset in="com1" dx="0" dy="0" result="offset1" data-v-ddd702e6></feOffset><feMerge data-v-ddd702e6><feMergeNode in="offset1" data-v-ddd702e6></feMergeNode><feMergeNode in="SourceAlpha" data-v-ddd702e6></feMergeNode></feMerge></filter>',2)),v("path",{id:"boatBoxPath",ref_key:"boatBoxPathRef",ref:Q,d:""},null,512)])]))],512)):h("",!0),c(M,{class:"footer"},{default:p(()=>[...t[15]||(t[15]=[v("div",{class:"footer-content"},[v("p",null,"© 2024 网安名人堂工作室. All rights reserved."),v("p",null,"联系邮箱: contact@wangan.com")],-1)])]),_:1})])}}},[["__scopeId","data-v-ddd702e6"]]);export{L as default};
