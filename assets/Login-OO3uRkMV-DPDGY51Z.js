import{l as e,$ as a,_ as t,a as d,H as o,N as s,q as r,g as c,h as l,j as i,k as n,e as u,O as p,R as f,Z as v,L as h,m,b as k,U as w,p as g,d as y,u as F,f as j}from"./index-CXpj-iG1.js";import{c as x}from"./index-DdPmJgzX-CCYd_JwC.js";const b={class:"login-page"},M={class:"game-section"},q={class:"controls"},A={key:0,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"},C={key:1,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"},L={class:"game-board"},S={class:"sr-only"},z=["onUpdate:modelValue","disabled","data-src","onChange"],V=["src"],G={class:"sr-only","aria-live":"polite"},O={class:"form-section"},H={class:"inputGroup inputGroup1"},E={class:"inputGroup inputGroup2"},R={class:"inputGroup inputGroup3"},T=["disabled"],_={class:"register-link"},D=e({__name:"Login",setup(e){const D=j(),P=a(),U=t(!1),B=t({username:"",password:""}),Y=["/assets/emojis/emoji1.webp","/assets/emojis/emoji2.webp","/assets/emojis/emoji3.webp","/assets/emojis/emoji4.webp","/assets/emojis/emoji5.webp","/assets/emojis/emoji6.webp","/assets/emojis/emoji7.webp","/assets/emojis/emoji8.webp"],I=t([]),J=t([]),K=t(!1),N=t(0),X=t(!0),Z=t("游戏开始"),$={select:new Audio("/assets/audio/select.mp3"),noMatch:new Audio("/assets/audio/no-match.mp3"),match:new Audio("/assets/audio/match.mp3"),win:new Audio("/assets/audio/win.mp3"),newGame:new Audio("/assets/audio/new-game.mp3")};let Q,W,ee,ae,te,de,oe,se;const re=e=>{X.value&&(e.currentTime=0,e.play())},ce=()=>{X.value=!X.value,Z.value="音效"+(X.value?"开启":"关闭")},le=()=>{const e=[...Y,...Y].sort(()=>Math.random()-.5);I.value=e.map(e=>({src:e,checked:!1,disabled:!1}))},ie=()=>{se&&x.to(se,{duration:.3,y:-2,ease:"power2.out"})},ne=()=>{ee&&ae&&te&&se&&(x.to([ee,ae],{duration:.5,x:0,y:0,scaleY:1,ease:"power2.out"}),x.to(te,{duration:.5,x:0,y:0,ease:"power2.out"}),x.to(se,{duration:.5,y:0,ease:"power2.out"}))},ue=()=>{Q&&W&&(x.to(Q,{duration:.5,x:-70,y:-5,rotation:0,ease:"quad.out",transformOrigin:"top left"}),x.to(W,{duration:.5,x:-115,y:-5,rotation:0,ease:"quad.out",delay:.1,transformOrigin:"top right"}))},pe=()=>{Q&&W&&(x.to(Q,{duration:1.35,x:-93,y:220,rotation:105,ease:"quad.out",transformOrigin:"top left"}),x.to(W,{duration:1.35,x:-93,y:220,rotation:-105,ease:"quad.out",delay:.1,transformOrigin:"top right"}))},fe=async()=>{var e,a;if(!B.value.username||!B.value.password)return F.warning("请输入用户名和密码"),void(oe&&x.to(oe,{duration:.1,x:-5,yoyo:!0,repeat:5,ease:"power2.inOut"}));U.value=!0;try{await P.login({username:B.value.username,password:B.value.password}),ee&&ae&&de&&(x.to([ee,ae],{duration:.3,scaleY:.5,ease:"power2.out"}),x.to(de,{duration:.3,y:5,ease:"power2.out"})),F.success("登录成功"),setTimeout(()=>{P.isAdmin?D.push("/admin"):D.push("/home")},500)}catch(t){ee&&ae&&de&&(x.to([ee,ae],{duration:.3,scaleY:1.2,ease:"power2.out"}),x.to(de,{duration:.3,y:-3,ease:"power2.out"}),x.to(oe,{duration:.1,x:-5,yoyo:!0,repeat:5,ease:"power2.inOut"}),setTimeout(()=>{x.to([ee,ae],{duration:.5,scaleY:1,ease:"power2.out"}),x.to(de,{duration:.5,y:0,ease:"power2.out"})},1e3));const d=t.message||(null==(a=null==(e=t.response)?void 0:e.data)?void 0:a.message)||"登录失败";F.error(d)}finally{U.value=!1}};return d(()=>{le(),Q=document.querySelector(".armL"),W=document.querySelector(".armR"),ee=document.querySelector(".eyeL"),ae=document.querySelector(".eyeR"),te=document.querySelector(".nose"),de=document.querySelector(".mouth"),oe=document.querySelector(".face"),se=document.querySelector(".eyebrow"),Q&&W&&(x.set(Q,{x:-93,y:220,rotation:105,transformOrigin:"top left"}),x.set(W,{x:-93,y:220,rotation:-105,transformOrigin:"top right"}))}),(e,a)=>{const t=y("router-link");return s(),o("div",b,[r("div",M,[r("div",q,[r("button",{"aria-label":"Toggle sound effects",class:"toggle-sound",onClick:ce},[X.value?(s(),o("svg",A,[...a[2]||(a[2]=[r("path",{d:"M11 5 6 9H2v6h4l5 4V5zM15.54 8.46a5 5 0 0 1 0 7.07M19.07 4.93a10 10 0 0 1 0 14.14"},null,-1)])])):(s(),o("svg",C,[...a[3]||(a[3]=[r("path",{d:"M11 5 6 9H2v6h4l5 4V5zM23 9l-6 6M17 9l6 6"},null,-1)])]))])]),r("div",L,[(s(!0),o(c,null,l(I.value,(e,a)=>(s(),o("label",{key:a,class:i({disabled:e.disabled})},[r("span",S,"Card "+u(a+1),1),n(r("input",{type:"checkbox","onUpdate:modelValue":a=>e.checked=a,disabled:e.disabled||K.value,"data-src":e.src,onChange:t=>((e,a)=>{if(K.value||e.disabled)e.checked=!e.checked;else if(re($.select),e.checked){if(J.value.push({card:e,index:a}),2===J.value.length){K.value=!0;const[e,a]=J.value;e.card.src===a.card.src?(()=>{const[e,a]=J.value;e.card.disabled=!0,a.card.disabled=!0,J.value=[],N.value++,Z.value="找到匹配",N.value===Y.length?(re($.win),Z.value="恭喜！找到所有匹配",setTimeout(()=>{N.value=0,re($.newGame),le(),Z.value="新游戏开始"},3e3)):re($.match),K.value=!1})():(()=>{const[e,a]=J.value;setTimeout(()=>{e.card.checked=!1,a.card.checked=!1,J.value=[],re($.noMatch),Z.value="不匹配",K.value=!1},500)})()}}else J.value=J.value.filter(a=>a.card!==e)})(e,a)},null,40,z),[[p,e.checked]]),r("img",{src:e.src,alt:""},null,8,V)],2))),128))]),r("output",G,u(Z.value),1)]),r("div",O,[r("form",{onSubmit:f(fe,["prevent"])},[a[8]||(a[8]=v('<div class="svgContainer" data-v-5fc2d93d><div data-v-5fc2d93d><svg class="mySVG" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 200 200" data-v-5fc2d93d><defs data-v-5fc2d93d><circle id="armMaskPath" cx="100" cy="100" r="100" data-v-5fc2d93d></circle></defs><clipPath id="armMask" data-v-5fc2d93d><use xlink:href="#armMaskPath" overflow="visible" data-v-5fc2d93d></use></clipPath><circle cx="100" cy="100" r="100" fill="#a9ddf3" data-v-5fc2d93d></circle><g class="body" data-v-5fc2d93d><path fill="#FFFFFF" d="M193.3,135.9c-5.8-8.4-15.5-13.9-26.5-13.9H151V72c0-27.6-22.4-50-50-50S51,44.4,51,72v50H32.1 c-10.6,0-20,5.1-25.8,13l0,78h187L193.3,135.9z" data-v-5fc2d93d></path><path fill="none" stroke="#3A5E77" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" d="M193.3,135.9 c-5.8-8.4-15.5-13.9-26.5-13.9H151V72c0-27.6-22.4-50-50-50S51,44.4,51,72v50H32.1c-10.6,0-20,5.1-25.8,13" data-v-5fc2d93d></path><path fill="#DDF1FA" d="M100,156.4c-22.9,0-43,11.1-54.1,27.7c15.6,10,34.2,15.9,54.1,15.9s38.5-5.8,54.1-15.9 C143,167.5,122.9,156.4,100,156.4z" data-v-5fc2d93d></path></g><g class="earL" data-v-5fc2d93d><g class="outerEar" fill="#ddf1fa" stroke="#3a5e77" stroke-width="2.5" data-v-5fc2d93d><circle cx="47" cy="83" r="11.5" data-v-5fc2d93d></circle><path d="M46.3 78.9c-2.3 0-4.1 1.9-4.1 4.1 0 2.3 1.9 4.1 4.1 4.1" stroke-linecap="round" stroke-linejoin="round" data-v-5fc2d93d></path></g><g class="earHair" data-v-5fc2d93d><rect x="51" y="64" fill="#FFFFFF" width="15" height="35" data-v-5fc2d93d></rect><path d="M53.4 62.8C48.5 67.4 45 72.2 42.8 77c3.4-.1 6.8-.1 10.1.1-4 3.7-6.8 7.6-8.2 11.6 2.1 0 4.2 0 6.3.2-2.6 4.1-3.8 8.3-3.7 12.5 1.2-.7 3.4-1.4 5.2-1.9" fill="#fff" stroke="#3a5e77" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" data-v-5fc2d93d></path></g></g><g class="earR" data-v-5fc2d93d><g class="outerEar" fill="#ddf1fa" stroke="#3a5e77" stroke-width="2.5" data-v-5fc2d93d><circle cx="155" cy="83" r="11.5" data-v-5fc2d93d></circle><path d="M155.7 78.9c2.3 0 4.1 1.9 4.1 4.1 0 2.3-1.9 4.1-4.1 4.1" stroke-linecap="round" stroke-linejoin="round" data-v-5fc2d93d></path></g><g class="earHair" data-v-5fc2d93d><rect x="131" y="64" fill="#FFFFFF" width="20" height="35" data-v-5fc2d93d></rect><path d="M148.6 62.8c4.9 4.6 8.4 9.4 10.6 14.2-3.4-.1-6.8-.1-10.1.1 4 3.7 6.8 7.6 8.2 11.6-2.1 0-4.2 0-6.3.2 2.6 4.1 3.8 8.3 3.7 12.5-1.2-.7-3.4-1.4-5.2-1.9" fill="#fff" stroke="#3a5e77" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" data-v-5fc2d93d></path></g></g><path class="chin" d="M84.1 121.6c2.7 2.9 6.1 5.4 9.8 7.5l.9-4.5c2.9 2.5 6.3 4.8 10.2 6.5 0-1.9-.1-3.9-.2-5.8 3 1.2 6.2 2 9.7 2.5-.3-2.1-.7-4.1-1.2-6.1" fill="none" stroke="#3a5e77" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" data-v-5fc2d93d></path><path class="face" fill="#DDF1FA" d="M134.5,46v35.5c0,21.815-15.446,39.5-34.5,39.5s-34.5-17.685-34.5-39.5V46" data-v-5fc2d93d></path><path class="hair" fill="#FFFFFF" stroke="#3A5E77" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" d="M81.457,27.929 c1.755-4.084,5.51-8.262,11.253-11.77c0.979,2.565,1.883,5.14,2.712,7.723c3.162-4.265,8.626-8.27,16.272-11.235 c-0.737,3.293-1.588,6.573-2.554,9.837c4.857-2.116,11.049-3.64,18.428-4.156c-2.403,3.23-5.021,6.391-7.852,9.474" data-v-5fc2d93d></path><g class="eyebrow" data-v-5fc2d93d><path fill="#FFFFFF" d="M138.142,55.064c-4.93,1.259-9.874,2.118-14.787,2.599c-0.336,3.341-0.776,6.689-1.322,10.037 c-4.569-1.465-8.909-3.222-12.996-5.226c-0.98,3.075-2.07,6.137-3.267,9.179c-5.514-3.067-10.559-6.545-15.097-10.329 c-1.806,2.889-3.745,5.73-5.816,8.515c-7.916-4.124-15.053-9.114-21.296-14.738l1.107-11.768h73.475V55.064z" data-v-5fc2d93d></path><path fill="#FFFFFF" stroke="#3A5E77" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" d="M63.56,55.102 c6.243,5.624,13.38,10.614,21.296,14.738c2.071-2.785,4.01-5.626,5.816-8.515c4.537,3.785,9.583,7.263,15.097,10.329 c1.197-3.043,2.287-6.104,3.267-9.179c4.087,2.004,8.427,3.761,12.996,5.226c0.545-3.348,0.986-6.696,1.322-10.037 c4.913-0.481,9.857-1.34,14.787-2.599" data-v-5fc2d93d></path></g><g class="eyeL" data-v-5fc2d93d><circle cx="85.5" cy="78.5" r="3.5" fill="#3a5e77" data-v-5fc2d93d></circle><circle cx="84" cy="76" r="1" fill="#fff" data-v-5fc2d93d></circle></g><g class="eyeR" data-v-5fc2d93d><circle cx="114.5" cy="78.5" r="3.5" fill="#3a5e77" data-v-5fc2d93d></circle><circle cx="113" cy="76" r="1" fill="#fff" data-v-5fc2d93d></circle></g><g class="mouth" data-v-5fc2d93d><path class="mouthBG" fill="#617E92" d="M100.2,101c-0.4,0-1.4,0-1.8,0c-2.7-0.3-5.3-1.1-8-2.5c-0.7-0.3-0.9-1.2-0.6-1.8 c0.2-0.5,0.7-0.7,1.2-0.7c0.2,0,0.5,0.1,0.6,0.2c3,1.5,5.8,2.3,8.6,2.3s5.7-0.7,8.6-2.3c0.2-0.1,0.4-0.2,0.6-0.2 c0.5,0,1,0.3,1.2,0.7c0.4,0.7,0.1,1.5-0.6,1.9c-2.6,1.4-5.3,2.2-7.9,2.5C101.7,101,100.5,101,100.2,101z" data-v-5fc2d93d></path><path class="mouthOutline" fill="none" stroke="#3A5E77" stroke-width="2.5" stroke-linejoin="round" d="M100.2,101c-0.4,0-1.4,0-1.8,0c-2.7-0.3-5.3-1.1-8-2.5c-0.7-0.3-0.9-1.2-0.6-1.8 c0.2-0.5,0.7-0.7,1.2-0.7c0.2,0,0.5,0.1,0.6,0.2c3,1.5,5.8,2.3,8.6,2.3s5.7-0.7,8.6-2.3c0.2-0.1,0.4-0.2,0.6-0.2 c0.5,0,1,0.3,1.2,0.7c0.4,0.7,0.1,1.5-0.6,1.9c-2.6,1.4-5.3,2.2-7.9,2.5C101.7,101,100.5,101,100.2,101z" data-v-5fc2d93d></path></g><path class="nose" d="M97.7 79.9h4.7c1.9 0 3 2.2 1.9 3.7l-2.3 3.3c-.9 1.3-2.9 1.3-3.8 0l-2.3-3.3c-1.3-1.6-.2-3.7 1.8-3.7z" fill="#3a5e77" data-v-5fc2d93d></path><g class="arms" clip-path="url(#armMask)" data-v-5fc2d93d><g class="armL" data-v-5fc2d93d><path fill="#ddf1fa" stroke="#3a5e77" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" stroke-width="2.5" d="M121.3 97.4L111 58.7l38.8-10.4 20 36.1z" data-v-5fc2d93d></path><path fill="#ddf1fa" stroke="#3a5e77" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" stroke-width="2.5" d="M134.4 52.5l19.3-5.2c2.7-.7 5.4.9 6.1 3.5.7 2.7-.9 5.4-3.5 6.1L146 59.7" data-v-5fc2d93d></path><path fill="#fff" stroke="#3a5e77" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M123.5 96.8c-41.4 14.9-84.1 30.7-108.2 35.5L1.2 80c33.5-9.9 71.9-16.5 111.9-21.8" data-v-5fc2d93d></path></g><g class="armR" data-v-5fc2d93d><path fill="#ddf1fa" stroke="#3a5e77" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" stroke-width="2.5" d="M265.4 97.3l10.4-38.6-38.9-10.5-20 36.1z" data-v-5fc2d93d></path><path fill="#ddf1fa" stroke="#3a5e77" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" stroke-width="2.5" d="M252.4 52.4L233 47.2c-2.7-.7-5.4.9-6.1 3.5-.7 2.7.9 5.4 3.5 6.1l10.3 2.8" data-v-5fc2d93d></path><path fill="#fff" stroke="#3a5e77" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M263.3 96.7c41.4 14.9 84.1 30.7 108.2 35.5l14-52.3C352 70 313.6 63.5 273.6 58.1" data-v-5fc2d93d></path></g></g></svg></div></div>',1)),r("div",H,[a[4]||(a[4]=r("label",{for:"username"},"用户名",-1)),n(r("input",{type:"text",id:"username","onUpdate:modelValue":a[0]||(a[0]=e=>B.value.username=e),onFocus:ie,onBlur:ne,maxlength:"50"},null,544),[[h,B.value.username]])]),r("div",E,[a[5]||(a[5]=r("label",{for:"password"},"密码",-1)),n(r("input",{type:"password",id:"password","onUpdate:modelValue":a[1]||(a[1]=e=>B.value.password=e),onFocus:ue,onBlur:pe,onKeyup:m(fe,["enter"])},null,544),[[h,B.value.password]])]),r("div",R,[r("button",{type:"submit",disabled:U.value},u(U.value?"登录中...":"登录"),9,T)]),r("div",_,[a[7]||(a[7]=k(" 还没有账号? ",-1)),w(t,{to:"/register"},{default:g(()=>[...a[6]||(a[6]=[k("立即注册",-1)])]),_:1})])],32)])])}}},[["__scopeId","data-v-5fc2d93d"]]);export{D as default};
