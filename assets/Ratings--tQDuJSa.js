import{a as e,b as a}from"./rating-C6_66R7H.js";import{_ as t,r as l,o as r,e as s,f as o,j as i,g as n,k as c,i as u,l as d,t as p,p as m,ad as g,ae as v,H as f,a5 as w}from"./index-CYfi38du.js";const h={class:"ratings-page"},b={class:"toolbar"},_={class:"user-cell"},y={class:"score-cell"},x={class:"score-badge"},z={class:"comment-text"},C={class:"time-cell"},T=t({__name:"Ratings",setup(t){const T=l([]),U=l(1),V=l(20),j=l(0),k=async()=>{try{const a=await e({page:U.value,size:V.value});T.value=a.data.list||[],j.value=a.data.total||0}catch(a){f.error("加载失败")}},N=e=>{if(!e)return"";return new Date(e).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})};return r(()=>{k()}),(e,t)=>{const l=c("el-statistic"),r=c("el-table-column"),B=c("el-avatar"),D=c("el-tag"),I=c("el-rate"),A=c("el-icon"),H=c("el-button"),L=c("el-table"),P=c("el-pagination");return o(),s("div",h,[t[2]||(t[2]=i("h1",null,"评论管理",-1)),i("div",b,[n(l,{title:"总评论数",value:j.value},null,8,["value"])]),n(L,{data:T.value,style:{width:"100%"},stripe:""},{default:u(()=>[n(r,{prop:"id",label:"ID",width:"80"}),n(r,{prop:"username",label:"用户",width:"120"},{default:u(({row:e})=>[i("div",_,[n(B,{size:32},{default:u(()=>{var a;return[d(p(null==(a=e.username)?void 0:a.charAt(0).toUpperCase()),1)]}),_:2},1024),i("span",null,p(e.username),1)])]),_:1}),n(r,{prop:"celebrityName",label:"评价名人",width:"150"},{default:u(({row:e})=>[n(D,{type:"success"},{default:u(()=>[d(p(e.celebrityName),1)]),_:2},1024)]),_:1}),n(r,{prop:"score",label:"评分",width:"100"},{default:u(({row:e})=>[i("div",y,[i("span",x,p(e.score),1),n(I,{modelValue:e.score,"onUpdate:modelValue":a=>e.score=a,disabled:"","show-score":"","text-color":"#ff9900",max:10},null,8,["modelValue","onUpdate:modelValue"])])]),_:1}),n(r,{prop:"comment",label:"评论内容","min-width":"300"},{default:u(({row:e})=>[i("div",z,p(e.comment||"无评论"),1)]),_:1}),n(r,{prop:"createTime",label:"创建时间",width:"180"},{default:u(({row:e})=>[i("div",C,[n(A,null,{default:u(()=>[n(m(g))]),_:1}),i("span",null,p(N(e.createTime)),1)])]),_:1}),n(r,{label:"操作",width:"120",fixed:"right"},{default:u(({row:e})=>[n(H,{size:"small",type:"danger",onClick:t=>(async e=>{try{await w.confirm("确定删除该评论吗？删除后无法恢复。","删除确认",{type:"warning",confirmButtonText:"确定删除",cancelButtonText:"取消"}),await a(e),f.success("删除成功"),k()}catch(t){"cancel"!==t&&f.error("删除失败")}})(e.id),icon:m(v)},{default:u(()=>[...t[1]||(t[1]=[d(" 删除 ",-1)])]),_:1},8,["onClick","icon"])]),_:1})]),_:1},8,["data"]),n(P,{"current-page":U.value,"onUpdate:currentPage":t[0]||(t[0]=e=>U.value=e),"page-size":V.value,total:j.value,layout:"total, prev, pager, next",onCurrentChange:k},null,8,["current-page","page-size","total"])])}}},[["__scopeId","data-v-8dcf9a3a"]]);export{T as default};
